<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>Reporte de Incidentes | SITRAEAL</title>
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
	rel="stylesheet">
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css"
	rel="stylesheet">
<style>
body {
	background: linear-gradient(rgba(0, 0, 0, .6), rgba(0, 0, 0, .6)),
		url('/img/fondo-home.jpg') no-repeat center center fixed;
	background-size: cover;
}

.card {
	border-radius: 15px;
	box-shadow: 0 10px 30px rgba(0, 0, 0, .4);
}

.card-header {
	background-color: #212529;
	color: white;
	border-radius: 15px 15px 0 0;
}

.text-danger-custom {
	color: #dc3545;
}
</style>
</head>
<body>
	<div class="container mt-5 mb-5">
		<div class="row justify-content-center">
			<div class="col-lg-8">
				<div th:if="${msgSuccess}"
					class="alert alert-success alert-dismissible fade show">
					<i class="bi bi-check-circle-fill"></i> <span
						th:text="${msgSuccess}"></span>
					<button type="button" class="btn-close" data-bs-dismiss="alert"></button>
				</div>
				<div th:if="${msgError}"
					class="alert alert-danger alert-dismissible fade show">
					<i class="bi bi-exclamation-triangle-fill"></i> <span
						th:text="${msgError}"></span>
					<button type="button" class="btn-close" data-bs-dismiss="alert"></button>
				</div>

				<div class="card">
					<div class="card-header text-center py-3">
						<h4>
							<i class="bi bi-exclamation-octagon-fill"></i> Registro de
							Incidente
						</h4>
					</div>
					<div class="card-body p-4">
						<form th:action="@{/reporteIncidente/guardar}"
							th:object="${reporte}" method="post">

							<h6 class="fw-bold text-danger-custom mb-3">
								<i class="bi bi-info-circle"></i> Información General
							</h6>
							<div class="row mb-3">
								<div class="col-md-6">
									<label class="form-label">Tipo de Suceso</label> <select
										th:field="*{tipo}" class="form-select" required>
										<option value="">Seleccione...</option>
										<option value="ACCIDENTE">ACCIDENTE</option>
										<option value="INCIDENTE">INCIDENTE</option>
										<option value="FALLA_TECNICA">FALLA TÉCNICA</option>
									</select>
								</div>
								<div class="col-md-6">
									<label class="form-label">Gravedad</label> <select
										th:field="*{gravedad}" class="form-select" required>
										<option value="">Seleccione...</option>
										<option value="BAJA">BAJA</option>
										<option value="MEDIA">MEDIA</option>
										<option value="ALTA">ALTA</option>
									</select>
								</div>
							</div>

							<div class="row mb-3">
								<div class="col-md-6">
									<label class="form-label">Fecha y Hora</label> <input
										type="datetime-local" th:field="*{fechaSuceso}"
										class="form-control" required>
								</div>
							</div>

							<h6 class="fw-bold text-danger-custom mb-3 mt-4">
								<i class="bi bi-link-45deg"></i> Vinculación
							</h6>

							<div class="row mb-3">
								<div class="col-md-6">
									<label class="form-label">Equipo</label> <select
										th:field="*{equipo.idEquipo}" class="form-select" required>
										<option value="">Seleccione el equipo</option>
										<option th:each="e : ${equipos}" th:value="${e.idEquipo}"
											th:text="${'Serial: ' + e.serial + ' - Lote: ' + e.lote}"></option>
									</select>
								</div>
								<div class="col-md-6">
									<label class="form-label">Empleado</label> <select
										th:field="*{empleado.idEmpleado}" class="form-select" required>
										<option value="">Seleccione el empleado</option>
										<option th:each="emp : ${empleados}"
											th:value="${emp.idEmpleado}"
											th:text="${emp.nombres + ' ' + emp.apellidos}"></option>
									</select>
								</div>
							</div>

							<h6 class="fw-bold text-danger-custom mb-3 mt-4">
								<i class="bi bi-card-text"></i> Detalles
							</h6>
							<div class="mb-3">
								<textarea th:field="*{descripcion}" class="form-control"
									rows="3" placeholder="Descripción..." required></textarea>
							</div>

							<div class="d-flex justify-content-between mt-4">
								<a th:href="@{/}" class="btn btn-secondary">Volver al Inicio</a>
								<button type="submit" class="btn btn-dark">Registrar
									Reporte</button>
							</div>
						</form>
					</div>
				</div>
			</div>
		</div>
	</div>
	<script
		src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
